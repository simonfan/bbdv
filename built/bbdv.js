//     bbdv
//     (c) simonfan
//     bbdv is licensed under the MIT terms.

define("bbdv/aux",["require","exports","module"],function(e,t){t.camelCase=function(e){return e.replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})},t.buildPrefixRegExp=function(e){return new RegExp("^"+e+"([A-Z$_].*$|$)")},t.lowercaseFirst=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.uppercaseFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}),define("bbdv/extract-directive-arguments",["require","exports","module","lodash","bbdv/aux"],function(e,t,i){function r(e,t){return s.camelCase(e+"-"+t)}var n=e("lodash"),s=e("bbdv/aux");i.exports=function(e,t,i){e=e||"",t.sort(function(e,t){return t.length-e.length});var c={};return n.each(i,function(i,a){n.any(t,function(t){var u=r(e,t);if(n.has(c,t)&&!n.isObject(c[t]))return!1;if(u===a)return c[t]=i,!0;var d=s.buildPrefixRegExp(u),o=a.match(d);if(o){var v=c[t];return v||(v=c[t]={}),v[s.lowercaseFirst(o[1])]=i,!0}return!1},this)},this),c}}),define("bbdv/execute-directives",["require","exports","module","lodash","bbdv/extract-directive-arguments","bbdv/aux"],function(e,t,i){{var r=e("lodash"),n=e("bbdv/extract-directive-arguments");e("bbdv/aux")}i.exports=function(e,t,i){var s=n(t,r.keys(i),e.data());r.each(s,function(t,n){var s=i[n];r.isFunction(s)?s.call(this,e,t):(s.exclude&&r.each(s.exclude,function(e){delete t[e]}),s.fn.call(this,e,t))},this)}}),define("bbdv",["require","exports","module","bb-rendered-view","jquery","lodash","bbdv/aux","bbdv/execute-directives"],function(e,t,i){var r=e("bb-rendered-view"),n=e("jquery"),s=e("lodash"),c=e("bbdv/aux"),a=e("bbdv/execute-directives"),u=r.prototype.initialize,d=i.exports=r.extend({initialize:function(e){u.call(this,e),s.each(["namespace","directives"],function(t){this[t]=e[t]||this[t]},this),this.directives=s.reduce(this.directives,function(e,t,i){return e[c.camelCase(i)]=s.isString(t)?this[t]:t,e},{},this),this.incorporate(this.$el.children())},incorporate:function(e){e=n(e);var t=this.directives,i=this.namespace,r=this.selector(this.namespace),c=e.find(r).addBack(r);return s.each(c,function(e){a.call(this,n(e),i,t)},this),this},directives:{},namespace:"dir",selector:function(e){return"[data-"+e+"]"}});d.assignStatic("directive",function(){s.isObject(arguments[0])?s.assign(this.prototype.directives,arguments[0]):this.prototype.directives[arguments[0]]=arguments[1]}),d.assignStatic("extendDirectives",function(e){var t=s.create(this.prototype.directives);s.assign(t,e);var i=this.extend({directives:t});return i})});