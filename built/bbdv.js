//     bbdv
//     (c) simonfan
//     bbdv is licensed under the MIT terms.

define("bbdv/aux",["require","exports","module"],function(e,t){t.camelCase=function(e){return e.replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})},t.buildPrefixRegExp=function(e){return new RegExp("^"+e+"([A-Z$_].*$|$)")},t.lowercaseFirst=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.uppercaseFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}),define("bbdv/extract-directive-arguments",["require","exports","module","lodash","bbdv/aux"],function(e,t,i){function r(e,t){return s.camelCase(e+"-"+t)}var n=e("lodash"),s=e("bbdv/aux");i.exports=function(e,t,i){e=e||"",t.sort(function(e,t){return t.length-e.length});var a={};return n.each(i,function(i,c){n.any(t,function(t){var u=r(e,t);if(n.has(a,t)&&!n.isObject(a[t]))return!1;if(u===c)return a[t]=i,!0;var o=s.buildPrefixRegExp(u),d=c.match(o);if(d){var v=a[t];return v||(v=a[t]={}),v[s.lowercaseFirst(d[1])]=i,!0}return!1},this)},this),a}}),define("bbdv/execute-directives",["require","exports","module","lodash","bbdv/extract-directive-arguments","bbdv/aux"],function(e,t,i){{var r=e("lodash"),n=e("bbdv/extract-directive-arguments");e("bbdv/aux")}i.exports=function(e,t,i){var s=n(t,r.keys(i),e.data());r.each(s,function(t,n){var s=i[n];r.isFunction(s)?s.call(this,e,t):(s.exclude&&r.each(s.exclude,function(e){delete t[e]}),s.fn.call(this,e,t))},this)}}),define("bbdv",["require","exports","module","lowercase-backbone","jquery","lodash","bbdv/aux","bbdv/execute-directives"],function(e,t,i){var r=e("lowercase-backbone"),n=e("jquery");_=e("lodash");var s=e("bbdv/aux"),a=e("bbdv/execute-directives"),c=r.view.prototype.initialize,u=i.exports=r.view.extend({initialize:function(e){c.call(this,e),_.each(["namespace","directives"],function(t){this[t]=e[t]||this[t]},this),this.directives=_.reduce(this.directives,function(e,t,i){return e[s.camelCase(i)]=_.isString(t)?this[t]:t,e},{},this),this.incorporate(this.$el)},incorporate:function(e){e=n(e);var t=this.directives,i=this.namespace,r=this.selector(this.namespace),s=e.find(r).addBack(r);return _.each(s,function(e){a.call(this,n(e),i,t)},this),this},directives:{},namespace:"dir",selector:function(e){return"[data-"+e+"]"}});u.assignStatic("directive",function(){_.isObject(arguments[0])?_.assign(this.prototype.directives,arguments[0]):this.prototype.directives[arguments[0]]=arguments[1]}),u.assignStatic("extendDirectives",function(e){var t=_.create(this.prototype.directives);_.assign(t,e);var i=this.extend({directives:t});return i})});